仕様書：Jacla Repertoire AI（仮）
1. 目的

部活動（Jacla）のレパートリー管理において、曲登録の手間と表記揺れを減らし、検索性と運営効率を向上させる。
「これまで習ったデータサイエンス要素」を用いて、曲情報からタグ付け・類似曲検索・可視化を行うアプリケーションを構築する。

2. スコープ
2.1 必須（MVP）

曲情報を入力すると AIがジャンルタグを推定する（分類）

推定結果を表示し、ユーザーが採用/修正して保存できる

登録済みデータから 類似曲Top-Nを提示できる（TF-IDF類似度）

学習済みモデルの精度を 混同行列＋Accuracy/Precision/Recall/F1で評価する

2.2 できたら（オプション）

曲の「雰囲気」「難易度」も推定（マルチラベル or 追加分類器）

PCA + クラスタリングで「曲マップ」を可視化

誤分類が起きやすいカテゴリの分析（考察用）

「学習データを追加して再学習」機能（ローカルのみでもOK）

3. ユースケース
UC-1：曲登録＋AIタグ提案

ユーザーが「曲名・アーティスト・メモ」を入力

システムがジャンルを予測し、確信度と候補を表示

ユーザーが「採用」または「修正」

登録データとして保存

UC-2：類似曲検索

ユーザーが曲を選択または検索語を入力

システムが類似曲Top5〜10件を提示

似ている理由の参考として共通キーワードを表示（任意）

UC-3：モデル評価（提出用）

学習データを train/test に分割

TF-IDF + 分類モデルで学習

テストで評価し、指標と混同行列を出力

結果をレポートに貼る

4. 機能要件
4.1 AIジャンル分類

入力：title, artist, memo

前処理：text = title + " " + artist + " " + memo

特徴量：TF-IDF

学習モデル（候補）：

Logistic Regression / Linear SVM / Multinomial Naive Bayes のいずれか

出力：

predicted_genre（例：anime/game/jpop/rock/jazz/fusion/ballad）

confidence（確率 or スコア）

top_k候補（任意）

4.2 類似曲検索

特徴量：ジャンル分類と同じTF-IDFベクトル

類似度：コサイン類似度

出力：類似曲Top-N（5〜10）

4.3 曲マップ（オプション）

TF-IDFベクトル → PCAで2次元に削減

k-means等でクラスタリング

2D散布図で表示、クリックで曲詳細を表示（できたら）

4.4 データ入出力

CSVからデータを読み込み、学習・評価ができる

登録した曲データはCSVまたはDB（最終課題ならCSVでも可）

提出用に、評価結果（指標）をファイル出力できる

5. 非機能要件

実行環境：Python 3.10+（想定）

依存：pandas, scikit-learn, numpy, matplotlib（+ streamlit 任意）

学習時間：200〜1000件程度なら数秒〜数十秒以内

推論：1件あたり数ms〜数十ms

再現性：random_state固定、requirements.txt で環境固定

6. データ設計
6.1 学習データ（CSV）

id, title, artist, memo, genre

行数目標：最低200、できれば500+

genre種類：6〜8種類（多すぎない）

推奨：anime, game, jpop, rock, jazz, fusion, ballad

6.2 推論ログ（任意）

timestamp, input_text, predicted_genre, confidence, user_final_genre

（ユーザーが修正したデータは次回学習に使える）

7. 画面設計（最小）
7.1 画面A：曲登録

入力欄：曲名/アーティスト/メモ

ボタン：AIで推定

表示：予測ジャンル、確信度、候補（任意）

ボタン：保存（ジャンルは編集可能）

7.2 画面B：一覧＋検索

登録曲一覧（フィルタ：ジャンル）

曲をクリック → 類似曲TopN表示

7.3 画面C：評価結果（提出用）

混同行列画像

指標（Accuracy / Precision / Recall / F1）

（任意）誤分類例リスト

8. 評価（レポートに書く項目）

train/test分割（例：80/20）

混同行列

Accuracy, Precision, Recall, F1（macro もあると良い）

誤分類が多いジャンルと理由（メモの特徴語不足など）

9. 開発タスク分解（CODEX向け）
Phase 1：データ作成（最重要）

CSV雛形作成 → 200行埋める（ジャンルバランス意識）

Phase 2：学習・評価スクリプト

TF-IDF + 分類器

指標出力 + 混同行列保存

Phase 3：ミニアプリ

入力 → 推論 → 保存

類似曲Top-N

Phase 4：仕上げ（任意）

PCA+クラスタの曲マップ

レポート整形

10. 提出物セット（最終課題で強い）

ソースコード（またはNotebook）

CSVデータ

実行手順（README）

評価結果（混同行列画像＋指標）

デモ（スクショor短い動画）